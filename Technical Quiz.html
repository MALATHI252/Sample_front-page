<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Technical Quiz Registration</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0d0d0d;
      color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 750px;
      margin: auto;
      background: #1a1a1a;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,255,255,0.3);
    }
    h1 { text-align: center; margin-bottom: 20px; text-shadow: 0 0 10px cyan; }
    h3 { margin-top: 20px; color: cyan; }
    label { display: block; margin-top: 12px; font-weight: bold; }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: none;
      border-radius: 6px;
      background: #262626;
      color: white;
      font-size: 15px;
    }
    input[type="submit"] {
      background: cyan;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 25px;
    }
    input[type="submit"]:hover { background: #00baba; }
    .links { text-align: center; margin-top: 20px; }
    .links a {
      display: inline-block;
      margin: 8px 0;
      padding: 10px 18px;
      border-radius: 6px;
      background: cyan;
      color: black;
      font-weight: bold;
      text-decoration: none;
      transition: 0.3s;
    }
    .links a:hover { background: #00baba; }
    .member { margin-top: 15px; padding: 15px; border: 1px solid #333; border-radius: 8px; }
  </style>
</head>
<body>

<div class="container">
  <h1>Technical Quiz Registration</h1>
  <form id="quizForm">

    <!-- Team Name -->
    <label for="teamName">Team Name</label>
    <input type="text" id="teamName" name="teamName" required>

    <!-- Number of Members -->
    <label for="membersCount">Number of Members</label>
    <select id="membersCount" name="membersCount" required>
      <option value="">--Select--</option>
      <option value="1">1</option>
      <option value="2">2</option>
    </select>

    <!-- Member 1 -->
    <div class="member">
      <h3>Member 1 Details</h3>
      <label for="name1">Full Name</label>
      <input type="text" id="name1" name="name1" required>

      <label for="regno1">Register Number</label>
      <input type="text" id="regno1" name="regno1" required>

      <label for="dept1">Department</label>
      <select id="dept1" name="dept1" required>
        <option value="">--Select Department--</option>
        <option>ECE</option>
        <option>CSE</option>
        <option>EEE</option>
        <option>IT</option>
        <option>CIVIL</option>
        <option>MECH</option>
      </select>

      <label for="year1">Year</label>
      <select id="year1" name="year1" required>
        <option value="">--Select Year--</option>
        <option>I</option>
        <option>II</option>
        <option>III</option>
        <option>IV</option>
      </select>

      <label for="email1">Email</label>
      <input type="email" id="email1" name="email1" required>

      <label for="phone1">Phone Number</label>
      <input type="tel" id="phone1" name="phone1" required>
    </div>

    <!-- Member 2 (hidden by default) -->
    <div class="member" id="member2" style="display:none;">
      <h3>Member 2 Details</h3>
      <label for="name2">Full Name</label>
      <input type="text" id="name2" name="name2">

      <label for="regno2">Register Number</label>
      <input type="text" id="regno2" name="regno2">

      <label for="dept2">Department</label>
      <select id="dept2" name="dept2">
        <option value="">--Select Department--</option>
        <option>ECE</option>
        <option>CSE</option>
        <option>EEE</option>
        <option>IT</option>
        <option>CIVIL</option>
        <option>MECH</option>
      </select>

      <label for="year2">Year</label>
      <select id="year2" name="year2">
        <option value="">--Select Year--</option>
        <option>I</option>
        <option>II</option>
        <option>III</option>
        <option>IV</option>
      </select>

      <label for="email2">Email</label>
      <input type="email" id="email2" name="email2">

      <label for="phone2">Phone Number</label>
      <input type="tel" id="phone2" name="phone2">
    </div>

    <input type="submit" value="Register">
  </form>

  <div class="links">
    <a href="https://chat.whatsapp.com/HCvvhTOi0Cl0hgmGYbKheG" target="_blank">üëâ Join WhatsApp Group</a><br>
    <a href="https://docs.google.com/document/d/1nlKFyiLy2Qrs12a1XaY65rqXVbd2VJuo/edit?usp=sharing" target="_blank">üìú View Rules</a>
  </div>
</div>

<script>
  // Show/hide member 2
  document.getElementById("membersCount").addEventListener("change", function() {
    let member2 = document.getElementById("member2");
    if (this.value === "2") {
      member2.style.display = "block";
      ["name2","regno2","dept2","year2","email2","phone2"].forEach(id => {
        document.getElementById(id).required = true;
      });
    } else {
      member2.style.display = "none";
      ["name2","regno2","dept2","year2","email2","phone2"].forEach(id => {
        document.getElementById(id).required = false;
      });
    }
  });

  // Apps Script Web App URL
  const scriptURL = "https://script.google.com/macros/s/AKfycbybUepkk5PNI0DBHRLo8HfI4rWXQit9yb2r1CGJG1GeG1gkdsGbnMCnzr3ogfuRSapDMA/exec"; // <-- Replace with your Apps Script Web App URL
  const quizForm = document.getElementById("quizForm");

  quizForm.addEventListener("submit", e => {
    e.preventDefault();
    const submitButton = quizForm.querySelector('input[type="submit"]');
    submitButton.disabled = true;
    submitButton.value = "Processing... ‚è≥";

    const formData = new FormData(quizForm);
    formData.append("eventName", "Technical Quiz");

    fetch(scriptURL, { method: "POST", body: formData })
      .then(response => response.text())
      .then(() => {
        alert("‚úÖ Registration submitted successfully!");
        quizForm.reset();
        document.getElementById("member2").style.display = "none";
        submitButton.disabled = false;
        submitButton.value = "Register";
      })
      .catch(err => {
        console.error("Error!", err.message);
        alert("‚ùå Registration failed. Please try again.");
        submitButton.disabled = false;
        submitButton.value = "Register";
      });
  });
</script>

</body>
</html>
